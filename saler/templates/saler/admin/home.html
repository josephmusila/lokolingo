{% extends 'saler/account_settings.html' %}
{% load static %}

{% block dashboard %}
<div class="searchbar2">
    <input type="text" name="" id="" placeholder="Search">
    <div class="searchbtn">
        <img src="https://media.geeksforgeeks.org/wp-content/uploads/20221210180758/Untitled-design-(28).png"
            class="icn srchicn" alt="search-button">
    </div>
</div>
<div class="row mb-4 ">

    <div class="col-lg-3 col-md-4 col-sm-12 mb-4">
        <div class="box box2">
            <div class="text">
                <h2 class="topic-heading">0</h2>
                <h2 class="topic">Total Students</h2>
            </div>
            <!-- <img src="https://media.geeksforgeeks.org/wp-content/uploads/20221210185030/14.png" alt="likes"> -->
        </div>
    </div>
    <div class="col-lg-3 col-md-4 col-sm-12 mb-4">
        <div class="box box3">
            <div class="text">
                <h2 class="topic-heading">{{skills|length}}</h2>
                <h2 class="topic">Total Skills</h2>
            </div>
            <!-- <img src="https://media.geeksforgeeks.org/wp-content/uploads/20221210184645/Untitled-design-(32).png" -->
            <!-- alt="comments"> -->
        </div>
    </div>
    <div class="col-lg-3 col-md-4 col-sm-12 mb-4">
        <div class="box box4">
            <div class="text">
                <h2 class="topic-heading">Ksh {{saler_finances.amount_balance}}</h2>
                <h2 class="topic">Total Earnings</h2>
            </div>
            <!-- <img src="https://media.geeksforgeeks.org/wp-content/uploads/20221210185029/13.png" alt="published"> -->
        </div>
    </div>
</div>






<div class="row mb-4">
    <div class="col-lg-5 col-md-12 col-sm-12">
        <!-- start -->
        <div class="account-data">
            <div class="profile-data p-2">
                <p class="name">{{request.user.first_name}} {{request.user.first_name}} </p>
                <div class="row">
                    <div class="col-lg-8 col-md-6 col-sm-12">
                        <p class="text-primary">@{{request.user.username}}</p>
                        <p>Tutor</p>
                        <p>Date Joined: {{request.user.date_joined}}</p>
                    </div>
                    <div class="col-lg-4 col-md-6 col-sm-12">
                        <img src="{{request.user.userdetails.photo.url}}" alt="" class="profile-img">
                    </div>
                </div>

                <div>


                </div>

            </div>
            <div class="finances">
                <h4 class="text-bold text-primary font-bold">Finances</h6>
                    <div class="balances">
                        <p class="current-balance"><span><i class="fas fa-money-bill fa-sm  "></i></span> Current
                            Balance: <span>Ksh {{saler_finances.amount_balance}}</span></p>
                        <p class="current-balance"><span><i class="fas fa-money-bill fa-sm  "></i></span> Last Deposit:
                            <span>Ksh {{saler_finances.last_deposit_amount}}</span>
                        </p>
                        <p class="current-balance"><span><i class="fas fa-money-bill fa-sm  "></i></span> Earnings Year
                            Balance: <span>Ksh {{saler_finances.amount_balance}}</span></p>
                    </div>
                    <div class="withdrawals">
                        <p class="current-balance"><span><i class="fas fa-money-bill-wave fa-sm  "></i></span> Total
                            Withdrawal Requests: <span> {{withdrawals|length}}</span></p>
                        <p class="current-balance"><span><i class="fas fa-calendar-alt  fa-sm  "></i></span> Pending
                            Withdrawals: <span>Ksh {{saler_finances.last_withdraw}}</span></p>
                        <p class="current-balance"><span><i class="fas fa-money-bill-wave fa-sm  "></i></span> This Year
                            Balance: <span>Ksh {{saler_finances.last_withdraw}}</span></p>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="col-lg-12 col-md-12 mb-3">
                            <a href="{% url 'withdrawals' %}" class="btn btn-success">Request Withdrawal</a>
                        </div>

                    </div>
            </div>
        </div>
        <!-- end -->

    </div>
    <div class="col-lg-7 col-md-12 col-sm-12">


        <div class="chart-section">
            <h6>Your Pregress: Overview</h6>
            <canvas id="myChart" width="400" height="200"></canvas>


        </div>

        <div class="db-messages bg-light">
            <h5>Messages</h5>
            <div class="row pr-3">
                {% if rooms %}
                {% for room in rooms %}
                <a href="{% url 'staffChat' room_id=room.id %}" class="db-message-item" style="text-decoration: none;">
                    <p class="  "> <span>{{forloop.counter}}</span>. {{room.student}}</p>
                    <p>{{room.message_count}} messages</p>
                </a>
                {% endfor %}

                {% else %}
                <h5 class="mt-4">No active Message Rooms</h5>
                {% endif %}
            </div>
        </div>

    </div>
</div>

<script>
    var data = {
        labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
        datasets: [
            {
                label: 'Profile Visits',
                backgroundColor: 'rgba(75, 192, 192, 0.2)',
                borderColor: 'rgba(75, 192, 192, 1)',
                borderWidth: 1,
                data: [65, 59, 80, 81, 56, 88, 95, 36, 90, 37, 66, 83],
            },
            {
                label: 'Bookings',
                backgroundColor: 'rgba(255, 99, 132, 0.2)',
                borderColor: 'rgba(255, 99, 132, 1)',
                borderWidth: 1,
                data: [45, 34, 44, 90, 65, 66, 87, 32, 14, 43, 26, 55],
            }
        ]
    };

    // Configuration options
    var options = {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    };

    // Get the canvas element
    var ctx = document.getElementById('myChart').getContext('2d');

    // Create the chart
    var myChart = new Chart(ctx, {
        type: 'bar',
        data: data,
        options: options
    });
</script>


{% endblock %}